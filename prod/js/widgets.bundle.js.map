{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/ts/classmodel/widget.ts","src/ts/helpers/html.ts","src/widgets/topic_publisher/main.ts"],"names":[],"mappings":"AAAA;;ACEA;IAIE,YAAY,gBAAwB;QAClC,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzC,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAEM,WAAW;IAClB,CAAC;IAEM,WAAW;IAClB,CAAC;IAEM,SAAS;IAChB,CAAC;IAEM,OAAO;IACd,CAAC;IAEM,WAAW;QAChB,IAAI,CAAC,QAAQ,GAAG,6CAA6C,GAAG,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;IAC9F,CAAC;AACH,CAAC;AAxBY,oBAAY,eAwBxB,CAAA;;;AC1BD,2CAA2C;;AAE3C,IAAiB,MAAM,CAwDtB;AAxDD,WAAiB,MAAM,EAAC,CAAC;IACvB;QACS,iBAAiB,CAAE,IAAS,EAAE,IAAY,EAAE,QAAgB,EAAE,IAAY,EAAE,QAAa,EAAE,KAAK,GAAW,CAAC;YACjH,IAAI,OAAO,GAAQ,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;YACnD,IAAI,KAAa,EAAE,KAAa,CAAC;YACjC,IAAI,KAAK,GAAQ,CAAC,CAAC,mCAAmC,GAAG,IAAI,GAAG,UAAU,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC9F,EAAE,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,CAAC,CAAC;gBACpB,IAAI,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;gBACpD,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,yBAAyB,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,GAAG,MAAM,GAAG,IAAI,GAAG,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC;YACvG,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC1C,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,yBAAyB,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,GAAG,MAAM,GAAG,IAAI,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC;YAC/F,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,yBAAyB,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,GAAG,MAAM,GAAG,IAAI,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC;gBAC7F,IAAI,CAAM,CAAC;gBACX,GAAG,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;oBAC7B,KAAK,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBAC9B,KAAK,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBAC9B,IAAI,MAAM,GAAG,QAAQ,IAAI,EAAE,GAAG,QAAQ,GAAG,GAAG,GAAG,EAAE,CAAC;oBAClD,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,GAAG,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;gBAClF,CAAC;YACH,CAAC;QACH,CAAC;QAEO,UAAU,CAAE,IAAY,EAAE,QAAe,EAAE,OAAO,GAAW,CAAC;YACpE,IAAI,OAAY,CAAC;YACjB,IAAI,CAAM,CAAC;YACX,IAAI,QAAQ,GAAU,QAAQ,CAAC,MAAM,CAAC,CAAC,KAAU,EAAE,KAAa,EAAE,KAAY,OAAO,MAAM,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACnH,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;gBAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC5C,MAAM,CAAC,IAAI,CAAC;QACd,CAAC;QACO,kBAAkB,CAAC,IAAY,EAAE,IAAY;YACnD,IAAI,IAAI,GAAa,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;YAChG,IAAI,MAAM,GAAa,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;YAC9C,IAAI,OAAO,GAAa,CAAC,QAAQ,CAAC,CAAC;YACnC,IAAI,KAAK,GAAa,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;YAC3C,IAAI,KAAK,GAAa,CAAC,MAAM,CAAC,CAAC;YAE/B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7B,MAAM,CAAC,CAAC,CAAC,6BAA6B,GAAG,IAAI,GAAG,eAAe,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACrF,CAAC;YACD,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpC,MAAM,CAAC,CAAC,CAAC,6BAA6B,GAAG,IAAI,GAAG,eAAe,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACrF,CAAC;YACD,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrC,MAAM,CAAC,CAAC,CAAC,2BAA2B,GAAG,IAAI,GAAG,eAAe,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACnF,CAAC;YACD,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnC,MAAM,CAAC,CAAC,CAAC,6BAA6B,GAAG,IAAI,GAAG,eAAe,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACrF,CAAC;YACD,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnC,MAAM,CAAC,CAAC,CAAC,+BAA+B,GAAG,IAAI,GAAG,eAAe,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACvF,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,IAAI,KAAK,CAAC,0BAA0B,GAAG,IAAI,CAAC,CAAC;YACrD,CAAC;QACH,CAAC;;IACH,CAAC;IAtDY,iBAAU,aAsDtB,CAAA;AACH,CAAC,EAxDgB,MAAM,GAAN,cAAM,KAAN,cAAM,QAwDtB;;;AC1DD,iDAAiD;;AAEjD,yBAA6B,4BAC7B,CAAC,CADwD;AACzD,uBAAuB,uBAAuB,CAAC,CAAA;AAI/C,mCAAmC,qBAAY;IAC7C,YAAY,gBAAwB;QAClC,MAAM,gBAAgB,CAAC,CAAC;QACxB,IAAI,CAAC,KAAK,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,WAAW,EAAE,EAAE,EAAE,CAAC,CAAC;IACzE,CAAC;IACD,sBAAsB;IACtB,WAAW;QACT,CAAC,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,GAAG,8BAA8B,EAAE,OAAO,EAAE,CAAC,CAAC;YAC9E,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YAClF,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YACrF,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YAClF,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC5E,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC/E,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QAC9E,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,GAAG,iCAAiC,EAAE,OAAO,EAAE,CAAC,CAAC;YACjF,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YAClF,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YACrF,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC5E,IAAI,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,GAAG,8BAA8B,EAAE,OAAO,EAAE,CAAC,CAAC;YAC9E,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC5E,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC/E,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC5E,IAAI,CAAC,IAAI,EAAE,CAAC;QACd,CAAC,CAAC,CAAC;IACL,CAAC;IACD,WAAW;IACX,CAAC;IACD,SAAS;IACT,CAAC;IACD,OAAO;IACP,CAAC;IACD,WAAW;QACT,GAAG,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,QAAQ;YAC7C,IAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,GAAG,aAAa,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACrD,IAAI,UAAU,GAAG,IAAI,aAAM,CAAC,UAAU,EAAE,CAAC;YACzC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACrD,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACrD,UAAU,CAAC,iBAAiB,CAAC,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,IAAI,CAAC,SAAS,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC1F,CAAC,EAAE,CAAC,KAAU;YACZ,KAAK,CAAC,wCAAwC,CAAC,CAAC;YAChD,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,mBAAmB;IACnB,WAAW;QACT,IAAI,GAAG,GAAQ,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,GAAG,aAAa,CAAC,CAAC;QACjE,IAAI,IAAI,GAAW,IAAI,CAAC,SAAS,CAAC;QAClC,IAAI,WAAW,GAAW,IAAI,CAAC,SAAS,CAAC;QACzC,IAAI,SAAS,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC;YAC/B,GAAG,EAAE,GAAG;YACR,IAAI,EAAE,IAAI;YACV,WAAW,EAAE,WAAW;SACzB,CAAC,CAAC;QACH,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC;IAGD,OAAO;QACL,IAAI,IAAI,GAAW,IAAI,CAAC,SAAS,CAAC;QAClC,IAAI,WAAW,GAAW,IAAI,CAAC,SAAS,CAAC;QACzC,IAAI,SAAS,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC;YAC/B,GAAG,EAAE,GAAG;YACR,IAAI,EAAE,IAAI;YACV,WAAW,EAAE,WAAW;SACzB,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,QAAQ,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;IAC5H,CAAC;IAED,IAAI;QACF,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACtC,CAAC;IAED,iBAAiB;IACjB,aAAa,CAAC,QAAgB;QAC5B,IAAI,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC;QACtB,IAAI,IAAI,CAAC;QACT,IAAI,UAAU,GAAQ,EAAE,CAAC;QACzB,IAAI,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,4DAA4D,CAAC,CAAC;QAC5F,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACvC,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YAClB,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC7B,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC7B,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAW,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAClD,IAAI,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxC,IAAI,IAAI,GAAW,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACnC,IAAI,CAAC,KAAK,GAAG,IAAI,GAAG,iBAAiB,GAAG,IAAI,GAAG,OAAO,CAAC,CAAC;YAC1D,CAAC;YACD,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACb,KAAK,MAAM;oBACT,IAAI,CAAC,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC;oBAC3C,KAAK,CAAC;gBACR,KAAK,QAAQ;oBACX,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;oBAChD,KAAK,CAAC;gBACR,KAAK,UAAU;oBACb,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACrD,KAAK,CAAC;YACV,CAAC;QACH,CAAC;QACD,MAAM,CAAC,UAAU,CAAC;IACpB,CAAC;;AAMH,CAAC;AAED,MAAM,CAAC,sBAAsB,CAAC,GAAG,oBAAoB,CAAC","file":"widgets.bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import { WidgetInterface } from '../interface/widget';\n\nexport class WidgetParent implements WidgetInterface {\n  public widgetInstanceId: number;\n  public selector: string;\n\n  constructor(widgetInstanceId: number) {\n    this.widgetInstanceId = widgetInstanceId;\n    this.setSelector();\n  }\n\n  public clbkCreated(): void {\n  }\n\n  public clbkResized(): void {\n  }\n\n  public clbkMoved(): void {\n  }\n\n  public clbkTab(): void {\n  }\n\n  public setSelector(): void {\n    this.selector = \".jsWidgetContainer[data-widget-instance-id=\" + this.widgetInstanceId + \"]\";\n  }\n}","///<reference path=\"../typings/tsd.d.ts\" />\n\nexport namespace Helper {\n  export class FormHelper {\n    public typeDefToHtmlForm (elem: any, name: string, formName: string, type: string, typeDefs: any, level: number = 0) {\n      let typeDef: any = this.getTypeDef(type, typeDefs);\n      let iname: string, itype: string;\n      let hType: any = $(\"<span style='color:#777;'>&nbsp;(\" + type + \")</span>\").prop('outerHTML');\n      if (typeDef == null) {\n        let input = this.generateInputField(formName, type);\n        $(elem).append($(\"<p style='padding-left:\" + (level * 20) + \"px'>\" + name + hType + input + \"</p>\"));\n      } else if (typeDef.fieldnames.length == 0) {\n        $(elem).append($(\"<p style='padding-left:\" + (level * 20) + \"px'>\" + name + hType + \"</p>\"));\n      } else {\n        $(elem).append($(\"<p style='padding-left:\" + (level * 20) + \"px'>\" + name + hType + \"</p>\"));\n        let i: any;\n        for (i in typeDef.fieldnames) {\n          iname = typeDef.fieldnames[i];\n          itype = typeDef.fieldtypes[i];\n          let prefix = formName != \"\" ? formName + \".\" : \"\";\n          this.typeDefToHtmlForm(elem, iname, prefix + iname, itype, typeDefs, level + 1);\n        }\n      }\n    }\n\n    private getTypeDef (type: string, typeDefs: any[], request: number = 1) {\n      let typeDef: any;\n      let i: any;\n      let filtered: any[] = typeDefs.filter((value: any, index: number, array: any[]) => { return type == value.type; });\n      if (filtered.length > 0) return filtered[0];\n      return null;\n    }\n    private generateInputField(name: string, type: string) {\n      let aInt: string[] = [\"int8\", \"uint8\", \"int16\", \"uint16\", \"int32\", \"uint32\", \"int64\", \"uint64\"];\n      let aFloat: string[] = [\"float32\", \"float64\"];\n      let aString: string[] = [\"string\"];\n      let aTime: string[] = [\"time\", \"duration\"];\n      let aBool: string[] = [\"bool\"];\n\n      if (aInt.indexOf(type) != -1) {\n        return $(\"<input type='number' name='\" + name + \"' value='' />\").prop('outerHTML');\n      }\n      else if (aFloat.indexOf(type) != -1) {\n        return $(\"<input type='number' name='\" + name + \"' value='' />\").prop('outerHTML');\n      }\n      else if (aString.indexOf(type) != -1) {\n        return $(\"<input type='text' name='\" + name + \"' value='' />\").prop('outerHTML');\n      }\n      else if (aTime.indexOf(type) != -1) {\n        return $(\"<input type='number' name='\" + name + \"' value='' />\").prop('outerHTML');\n      }\n      else if (aBool.indexOf(type) != -1) {\n        return $(\"<input type='checkbox' name='\" + name + \"' value='' />\").prop('outerHTML');\n      } else {\n        throw new Error(\"Unknown primitive type: \" + type);\n      }\n    };\n  }\n}","///<reference path=\"../../ts/typings/tsd.d.ts\" />\n\nimport { WidgetParent } from '../../ts/classmodel/widget'\nimport { Helper } from '../../ts/helpers/html';\n\ndeclare var ros: ROSLIB.Ros;\n\nclass WidgetTopicPublisher extends WidgetParent {\n  constructor(widgetInstanceId: number) {\n    super(widgetInstanceId);\n    this.topic = new ROSLIB.Topic({ ros: ros, name: \"\", messageType: \"\" });\n  }\n  // Mandatory callbacks\n  clbkCreated(): void {\n    $(document).delegate(this.selector + \" .jsWidgetTopicPublisherOnce\", 'click', (e) => {\n      $(this.selector).find(\".jsWidgetTopicPublisherOnce\").attr(\"disabled\", \"disabled\");\n      $(this.selector).find(\".jsWidgetTopicPublisherPublish\").attr(\"disabled\", \"disabled\");\n      $(this.selector).find(\".jsWidgetTopicPublisherStop\").attr(\"disabled\", \"disabled\");\n      this.publishOnce();\n      $(this.selector).find(\".jsWidgetTopicPublisherOnce\").removeAttr(\"disabled\");\n      $(this.selector).find(\".jsWidgetTopicPublisherPublish\").removeAttr(\"disabled\");\n      $(this.selector).find(\".jsWidgetTopicPublisherStop\").removeAttr(\"disabled\");\n    });\n    $(document).delegate(this.selector + \" .jsWidgetTopicPublisherPublish\", 'click', (e) => {\n      $(this.selector).find(\".jsWidgetTopicPublisherOnce\").attr(\"disabled\", \"disabled\");\n      $(this.selector).find(\".jsWidgetTopicPublisherPublish\").attr(\"disabled\", \"disabled\");\n      $(this.selector).find(\".jsWidgetTopicPublisherStop\").removeAttr(\"disabled\");\n      this.publish();\n    });\n    $(document).delegate(this.selector + \" .jsWidgetTopicPublisherStop\", 'click', (e) => {\n      $(this.selector).find(\".jsWidgetTopicPublisherOnce\").removeAttr(\"disabled\");\n      $(this.selector).find(\".jsWidgetTopicPublisherPublish\").removeAttr(\"disabled\");\n      $(this.selector).find(\".jsWidgetTopicPublisherStop\").removeAttr(\"disabled\");\n      this.stop();\n    });\n  }\n  clbkResized(): void {\n  }\n  clbkMoved(): void {\n  }\n  clbkTab(): void {\n  }\n  clbkConfirm(): void {\n    ros.getMessageDetails(this.topicType, (typeDefs) => {\n      var elem = $(this.selector + \" .form form\").html(\"\");\n      let htmlHelper = new Helper.FormHelper();\n      $(this.selector).find(\"p.name\").html(this.topicName);\n      $(this.selector).find(\"p.type\").html(this.topicType);\n      htmlHelper.typeDefToHtmlForm(elem, \"Object\", \"formObject\", this.topicType, typeDefs, 0);\n    }, (error: any) => {\n      alert(\"Topic type not found, please try again\");\n      console.log(error);\n    });\n  }\n\n  // button callbacks\n  publishOnce(): void {\n    let obj: any = this.getObjectForm(this.selector + \" .form form\");\n    let name: string = this.topicName;\n    let messageType: string = this.topicType;\n    let publisher = new ROSLIB.Topic({\n      ros: ros,\n      name: name,\n      messageType: messageType\n    });\n    publisher.publish(obj);\n  }\n\n  public interval: any;\n  publish(): void {\n    let name: string = this.topicName;\n    let messageType: string = this.topicType;\n    let publisher = new ROSLIB.Topic({\n      ros: ros,\n      name: name,\n      messageType: messageType\n    });\n    this.interval = window.setInterval(() => { publisher.publish(this.getObjectForm(this.selector + \" .form form\")); }, 1000);\n  }\n\n  stop(): void {\n    window.clearInterval(this.interval);\n  }\n\n  // helper methods\n  getObjectForm(selector: string): any {\n    var input, name, type;\n    var tree;\n    var formObject: any = {};\n    var inputs = $(selector).find(\"input[type=text], input[type=checkbox], input[type=number]\");\n    for (var i = 0; i < inputs.length; i++) {\n      input = inputs[i];\n      name = $(input).attr(\"name\");\n      type = $(input).attr(\"type\");\n      var nameSplit = name.split('.');\n      for (let j: number = 0; j < nameSplit.length; j++) {\n        let slice = nameSplit.slice(0, (j + 1));\n        let prop: string = slice.join(\".\");\n        eval(\"if(\" + prop + \" == undefined) \" + prop + \" = {}\");\n      }\n      switch (type) {\n        case 'text':\n          eval(name + \" = '\" + $(input).val() + \"'\");\n          break;\n        case 'number':\n          eval(name + \" = \" + parseFloat($(input).val()));\n          break;\n        case 'checkbox':\n          eval(name + \" = \" + $(input).is(\":checked\")) ? 1 : 0;\n          break;\n      }\n    }\n    return formObject;\n  };\n\n  // ===== widget params =====\n  public topicName: string;\n  public topicType: string;\n  public topic: ROSLIB.Topic;\n}\n\nwindow[\"WidgetTopicPublisher\"] = WidgetTopicPublisher;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvY2xhc3Ntb2RlbC93aWRnZXQudHMiLCJzcmMvdHMvaGVscGVycy9odG1sLnRzIiwic3JjL3dpZGdldHMvdG9waWNfcHVibGlzaGVyL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDRUE7SUFJRSxZQUFZLGdCQUF3QjtRQUNsQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7UUFDekMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3JCLENBQUM7SUFFTSxXQUFXO0lBQ2xCLENBQUM7SUFFTSxXQUFXO0lBQ2xCLENBQUM7SUFFTSxTQUFTO0lBQ2hCLENBQUM7SUFFTSxPQUFPO0lBQ2QsQ0FBQztJQUVNLFdBQVc7UUFDaEIsSUFBSSxDQUFDLFFBQVEsR0FBRyw2Q0FBNkMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsR0FBRyxDQUFDO0lBQzlGLENBQUM7QUFDSCxDQUFDO0FBeEJZLG9CQUFZLGVBd0J4QixDQUFBOzs7QUMxQkQsMkNBQTJDOztBQUUzQyxJQUFpQixNQUFNLENBd0R0QjtBQXhERCxXQUFpQixNQUFNLEVBQUMsQ0FBQztJQUN2QjtRQUNTLGlCQUFpQixDQUFFLElBQVMsRUFBRSxJQUFZLEVBQUUsUUFBZ0IsRUFBRSxJQUFZLEVBQUUsUUFBYSxFQUFFLEtBQUssR0FBVyxDQUFDO1lBQ2pILElBQUksT0FBTyxHQUFRLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ25ELElBQUksS0FBYSxFQUFFLEtBQWEsQ0FBQztZQUNqQyxJQUFJLEtBQUssR0FBUSxDQUFDLENBQUMsbUNBQW1DLEdBQUcsSUFBSSxHQUFHLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM5RixFQUFFLENBQUMsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFD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QUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQztvQkFDM0MsS0FBSyxDQUFDO2dCQUNSLEtBQUssUUFBUTtvQkFDWCxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDaEQsS0FBSyxDQUFDO2dCQUNSLEtBQUssVUFBVTtvQkFDYixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDckQsS0FBSyxDQUFDO1lBQ1YsQ0FBQztRQUNILENBQUM7UUFDRCxNQUFNLENBQUMsVUFBVSxDQUFDO0lBQ3BCLENBQUM7O0FBTUgsQ0FBQztBQUVELE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLG9CQUFvQixDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7IFdpZGdldEludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZS93aWRnZXQnO1xuXG5leHBvcnQgY2xhc3MgV2lkZ2V0UGFyZW50IGltcGxlbWVudHMgV2lkZ2V0SW50ZXJmYWNlIHtcbiAgcHVibGljIHdpZGdldEluc3RhbmNlSWQ6IG51bWJlcjtcbiAgcHVibGljIHNlbGVjdG9yOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Iod2lkZ2V0SW5zdGFuY2VJZDogbnVtYmVyKSB7XG4gICAgdGhpcy53aWRnZXRJbnN0YW5jZUlkID0gd2lkZ2V0SW5zdGFuY2VJZDtcbiAgICB0aGlzLnNldFNlbGVjdG9yKCk7XG4gIH1cblxuICBwdWJsaWMgY2xia0NyZWF0ZWQoKTogdm9pZCB7XG4gIH1cblxuICBwdWJsaWMgY2xia1Jlc2l6ZWQoKTogdm9pZCB7XG4gIH1cblxuICBwdWJsaWMgY2xia01vdmVkKCk6IHZvaWQge1xuICB9XG5cbiAgcHVibGljIGNsYmtUYWIoKTogdm9pZCB7XG4gIH1cblxuICBwdWJsaWMgc2V0U2VsZWN0b3IoKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RvciA9IFwiLmpzV2lkZ2V0Q29udGFpbmVyW2RhdGEtd2lkZ2V0LWluc3RhbmNlLWlkPVwiICsgdGhpcy53aWRnZXRJbnN0YW5jZUlkICsgXCJdXCI7XG4gIH1cbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cblxuZXhwb3J0IG5hbWVzcGFjZSBIZWxwZXIge1xuICBleHBvcnQgY2xhc3MgRm9ybUhlbHBlciB7XG4gICAgcHVibGljIHR5cGVEZWZUb0h0bWxGb3JtIChlbGVtOiBhbnksIG5hbWU6IHN0cmluZywgZm9ybU5hbWU6IHN0cmluZywgdHlwZTogc3RyaW5nLCB0eXBlRGVmczogYW55LCBsZXZlbDogbnVtYmVyID0gMCkge1xuICAgICAgbGV0IHR5cGVEZWY6IGFueSA9IHRoaXMuZ2V0VHlwZURlZih0eXBlLCB0eXBlRGVmcyk7XG4gICAgICBsZXQgaW5hbWU6IHN0cmluZywgaXR5cGU6IHN0cmluZztcbiAgICAgIGxldCBoVHlwZTogYW55ID0gJChcIjxzcGFuIHN0eWxlPSdjb2xvcjojNzc3Oyc+Jm5ic3A7KFwiICsgdHlwZSArIFwiKTwvc3Bhbj5cIikucHJvcCgnb3V0ZXJIVE1MJyk7XG4gICAgICBpZiAodHlwZURlZiA9PSBudWxsKSB7XG4gICAgICAgIGxldCBpbnB1dCA9IHRoaXMuZ2VuZXJhdGVJbnB1dEZpZWxkKGZvcm1OYW1lLCB0eXBlKTtcbiAgICAgICAgJChlbGVtKS5hcHBlbmQoJChcIjxwIHN0eWxlPSdwYWRkaW5nLWxlZnQ6XCIgKyAobGV2ZWwgKiAyMCkgKyBcInB4Jz5cIiArIG5hbWUgKyBoVHlwZSArIGlucHV0ICsgXCI8L3A+XCIpKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZURlZi5maWVsZG5hbWVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICQoZWxlbSkuYXBwZW5kKCQoXCI8cCBzdHlsZT0ncGFkZGluZy1sZWZ0OlwiICsgKGxldmVsICogMjApICsgXCJweCc+XCIgKyBuYW1lICsgaFR5cGUgKyBcIjwvcD5cIikpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChlbGVtKS5hcHBlbmQoJChcIjxwIHN0eWxlPSdwYWRkaW5nLWxlZnQ6XCIgKyAobGV2ZWwgKiAyMCkgKyBcInB4Jz5cIiArIG5hbWUgKyBoVHlwZSArIFwiPC9wPlwiKSk7XG4gICAgICAgIGxldCBpOiBhbnk7XG4gICAgICAgIGZvciAoaSBpbiB0eXBlRGVmLmZpZWxkbmFtZXMpIHtcbiAgICAgICAgICBpbmFtZSA9IHR5cGVEZWYuZmllbGRuYW1lc1tpXTtcbiAgICAgICAgICBpdHlwZSA9IHR5cGVEZWYuZmllbGR0eXBlc1tpXTtcbiAgICAgICAgICBsZXQgcHJlZml4ID0gZm9ybU5hbWUgIT0gXCJcIiA/IGZvcm1OYW1lICsgXCIuXCIgOiBcIlwiO1xuICAgICAgICAgIHRoaXMudHlwZURlZlRvSHRtbEZvcm0oZWxlbSwgaW5hbWUsIHByZWZpeCArIGluYW1lLCBpdHlwZSwgdHlwZURlZnMsIGxldmVsICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFR5cGVEZWYgKHR5cGU6IHN0cmluZywgdHlwZURlZnM6IGFueVtdLCByZXF1ZXN0OiBudW1iZXIgPSAxKSB7XG4gICAgICBsZXQgdHlwZURlZjogYW55O1xuICAgICAgbGV0IGk6IGFueTtcbiAgICAgIGxldCBmaWx0ZXJlZDogYW55W10gPSB0eXBlRGVmcy5maWx0ZXIoKHZhbHVlOiBhbnksIGluZGV4OiBudW1iZXIsIGFycmF5OiBhbnlbXSkgPT4geyByZXR1cm4gdHlwZSA9PSB2YWx1ZS50eXBlOyB9KTtcbiAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwKSByZXR1cm4gZmlsdGVyZWRbMF07XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUlucHV0RmllbGQobmFtZTogc3RyaW5nLCB0eXBlOiBzdHJpbmcpIHtcbiAgICAgIGxldCBhSW50OiBzdHJpbmdbXSA9IFtcImludDhcIiwgXCJ1aW50OFwiLCBcImludDE2XCIsIFwidWludDE2XCIsIFwiaW50MzJcIiwgXCJ1aW50MzJcIiwgXCJpbnQ2NFwiLCBcInVpbnQ2NFwiXTtcbiAgICAgIGxldCBhRmxvYXQ6IHN0cmluZ1tdID0gW1wiZmxvYXQzMlwiLCBcImZsb2F0NjRcIl07XG4gICAgICBsZXQgYVN0cmluZzogc3RyaW5nW10gPSBbXCJzdHJpbmdcIl07XG4gICAgICBsZXQgYVRpbWU6IHN0cmluZ1tdID0gW1widGltZVwiLCBcImR1cmF0aW9uXCJdO1xuICAgICAgbGV0IGFCb29sOiBzdHJpbmdbXSA9IFtcImJvb2xcIl07XG5cbiAgICAgIGlmIChhSW50LmluZGV4T2YodHlwZSkgIT0gLTEpIHtcbiAgICAgICAgcmV0dXJuICQoXCI8aW5wdXQgdHlwZT0nbnVtYmVyJyBuYW1lPSdcIiArIG5hbWUgKyBcIicgdmFsdWU9JycgLz5cIikucHJvcCgnb3V0ZXJIVE1MJyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChhRmxvYXQuaW5kZXhPZih0eXBlKSAhPSAtMSkge1xuICAgICAgICByZXR1cm4gJChcIjxpbnB1dCB0eXBlPSdudW1iZXInIG5hbWU9J1wiICsgbmFtZSArIFwiJyB2YWx1ZT0nJyAvPlwiKS5wcm9wKCdvdXRlckhUTUwnKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGFTdHJpbmcuaW5kZXhPZih0eXBlKSAhPSAtMSkge1xuICAgICAgICByZXR1cm4gJChcIjxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSdcIiArIG5hbWUgKyBcIicgdmFsdWU9JycgLz5cIikucHJvcCgnb3V0ZXJIVE1MJyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChhVGltZS5pbmRleE9mKHR5cGUpICE9IC0xKSB7XG4gICAgICAgIHJldHVybiAkKFwiPGlucHV0IHR5cGU9J251bWJlcicgbmFtZT0nXCIgKyBuYW1lICsgXCInIHZhbHVlPScnIC8+XCIpLnByb3AoJ291dGVySFRNTCcpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoYUJvb2wuaW5kZXhPZih0eXBlKSAhPSAtMSkge1xuICAgICAgICByZXR1cm4gJChcIjxpbnB1dCB0eXBlPSdjaGVja2JveCcgbmFtZT0nXCIgKyBuYW1lICsgXCInIHZhbHVlPScnIC8+XCIpLnByb3AoJ291dGVySFRNTCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBwcmltaXRpdmUgdHlwZTogXCIgKyB0eXBlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHMvdHlwaW5ncy90c2QuZC50c1wiIC8+XG5cbmltcG9ydCB7IFdpZGdldFBhcmVudCB9IGZyb20gJy4uLy4uL3RzL2NsYXNzbW9kZWwvd2lkZ2V0J1xuaW1wb3J0IHsgSGVscGVyIH0gZnJvbSAnLi4vLi4vdHMvaGVscGVycy9odG1sJztcblxuZGVjbGFyZSB2YXIgcm9zOiBST1NMSUIuUm9zO1xuXG5jbGFzcyBXaWRnZXRUb3BpY1B1Ymxpc2hlciBleHRlbmRzIFdpZGdldFBhcmVudCB7XG4gIGNvbnN0cnVjdG9yKHdpZGdldEluc3RhbmNlSWQ6IG51bWJlcikge1xuICAgIHN1cGVyKHdpZGdldEluc3RhbmNlSWQpO1xuICAgIHRoaXMudG9waWMgPSBuZXcgUk9TTElCLlRvcGljKHsgcm9zOiByb3MsIG5hbWU6IFwiXCIsIG1lc3NhZ2VUeXBlOiBcIlwiIH0pO1xuICB9XG4gIC8vIE1hbmRhdG9yeSBjYWxsYmFja3NcbiAgY2xia0NyZWF0ZWQoKTogdm9pZCB7XG4gICAgJChkb2N1bWVudCkuZGVsZWdhdGUodGhpcy5zZWxlY3RvciArIFwiIC5qc1dpZGdldFRvcGljUHVibGlzaGVyT25jZVwiLCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgJCh0aGlzLnNlbGVjdG9yKS5maW5kKFwiLmpzV2lkZ2V0VG9waWNQdWJsaXNoZXJPbmNlXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgICAgJCh0aGlzLnNlbGVjdG9yKS5maW5kKFwiLmpzV2lkZ2V0VG9waWNQdWJsaXNoZXJQdWJsaXNoXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgICAgJCh0aGlzLnNlbGVjdG9yKS5maW5kKFwiLmpzV2lkZ2V0VG9waWNQdWJsaXNoZXJTdG9wXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgICAgdGhpcy5wdWJsaXNoT25jZSgpO1xuICAgICAgJCh0aGlzLnNlbGVjdG9yKS5maW5kKFwiLmpzV2lkZ2V0VG9waWNQdWJsaXNoZXJPbmNlXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICQodGhpcy5zZWxlY3RvcikuZmluZChcIi5qc1dpZGdldFRvcGljUHVibGlzaGVyUHVibGlzaFwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XG4gICAgICAkKHRoaXMuc2VsZWN0b3IpLmZpbmQoXCIuanNXaWRnZXRUb3BpY1B1Ymxpc2hlclN0b3BcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgIH0pO1xuICAgICQoZG9jdW1lbnQpLmRlbGVnYXRlKHRoaXMuc2VsZWN0b3IgKyBcIiAuanNXaWRnZXRUb3BpY1B1Ymxpc2hlclB1Ymxpc2hcIiwgJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICQodGhpcy5zZWxlY3RvcikuZmluZChcIi5qc1dpZGdldFRvcGljUHVibGlzaGVyT25jZVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiAgICAgICQodGhpcy5zZWxlY3RvcikuZmluZChcIi5qc1dpZGdldFRvcGljUHVibGlzaGVyUHVibGlzaFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiAgICAgICQodGhpcy5zZWxlY3RvcikuZmluZChcIi5qc1dpZGdldFRvcGljUHVibGlzaGVyU3RvcFwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XG4gICAgICB0aGlzLnB1Ymxpc2goKTtcbiAgICB9KTtcbiAgICAkKGRvY3VtZW50KS5kZWxlZ2F0ZSh0aGlzLnNlbGVjdG9yICsgXCIgLmpzV2lkZ2V0VG9waWNQdWJsaXNoZXJTdG9wXCIsICdjbGljaycsIChlKSA9PiB7XG4gICAgICAkKHRoaXMuc2VsZWN0b3IpLmZpbmQoXCIuanNXaWRnZXRUb3BpY1B1Ymxpc2hlck9uY2VcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgJCh0aGlzLnNlbGVjdG9yKS5maW5kKFwiLmpzV2lkZ2V0VG9waWNQdWJsaXNoZXJQdWJsaXNoXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICQodGhpcy5zZWxlY3RvcikuZmluZChcIi5qc1dpZGdldFRvcGljUHVibGlzaGVyU3RvcFwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XG4gICAgICB0aGlzLnN0b3AoKTtcbiAgICB9KTtcbiAgfVxuICBjbGJrUmVzaXplZCgpOiB2b2lkIHtcbiAgfVxuICBjbGJrTW92ZWQoKTogdm9pZCB7XG4gIH1cbiAgY2xia1RhYigpOiB2b2lkIHtcbiAgfVxuICBjbGJrQ29uZmlybSgpOiB2b2lkIHtcbiAgICByb3MuZ2V0TWVzc2FnZURldGFpbHModGhpcy50b3BpY1R5cGUsICh0eXBlRGVmcykgPT4ge1xuICAgICAgdmFyIGVsZW0gPSAkKHRoaXMuc2VsZWN0b3IgKyBcIiAuZm9ybSBmb3JtXCIpLmh0bWwoXCJcIik7XG4gICAgICBsZXQgaHRtbEhlbHBlciA9IG5ldyBIZWxwZXIuRm9ybUhlbHBlcigpO1xuICAgICAgJCh0aGlzLnNlbGVjdG9yKS5maW5kKFwicC5uYW1lXCIpLmh0bWwodGhpcy50b3BpY05hbWUpO1xuICAgICAgJCh0aGlzLnNlbGVjdG9yKS5maW5kKFwicC50eXBlXCIpLmh0bWwodGhpcy50b3BpY1R5cGUpO1xuICAgICAgaHRtbEhlbHBlci50eXBlRGVmVG9IdG1sRm9ybShlbGVtLCBcIk9iamVjdFwiLCBcImZvcm1PYmplY3RcIiwgdGhpcy50b3BpY1R5cGUsIHR5cGVEZWZzLCAwKTtcbiAgICB9LCAoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgYWxlcnQoXCJUb3BpYyB0eXBlIG5vdCBmb3VuZCwgcGxlYXNlIHRyeSBhZ2FpblwiKTtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGJ1dHRvbiBjYWxsYmFja3NcbiAgcHVibGlzaE9uY2UoKTogdm9pZCB7XG4gICAgbGV0IG9iajogYW55ID0gdGhpcy5nZXRPYmplY3RGb3JtKHRoaXMuc2VsZWN0b3IgKyBcIiAuZm9ybSBmb3JtXCIpO1xuICAgIGxldCBuYW1lOiBzdHJpbmcgPSB0aGlzLnRvcGljTmFtZTtcbiAgICBsZXQgbWVzc2FnZVR5cGU6IHN0cmluZyA9IHRoaXMudG9waWNUeXBlO1xuICAgIGxldCBwdWJsaXNoZXIgPSBuZXcgUk9TTElCLlRvcGljKHtcbiAgICAgIHJvczogcm9zLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIG1lc3NhZ2VUeXBlOiBtZXNzYWdlVHlwZVxuICAgIH0pO1xuICAgIHB1Ymxpc2hlci5wdWJsaXNoKG9iaik7XG4gIH1cblxuICBwdWJsaWMgaW50ZXJ2YWw6IGFueTtcbiAgcHVibGlzaCgpOiB2b2lkIHtcbiAgICBsZXQgbmFtZTogc3RyaW5nID0gdGhpcy50b3BpY05hbWU7XG4gICAgbGV0IG1lc3NhZ2VUeXBlOiBzdHJpbmcgPSB0aGlzLnRvcGljVHlwZTtcbiAgICBsZXQgcHVibGlzaGVyID0gbmV3IFJPU0xJQi5Ub3BpYyh7XG4gICAgICByb3M6IHJvcyxcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBtZXNzYWdlVHlwZTogbWVzc2FnZVR5cGVcbiAgICB9KTtcbiAgICB0aGlzLmludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHsgcHVibGlzaGVyLnB1Ymxpc2godGhpcy5nZXRPYmplY3RGb3JtKHRoaXMuc2VsZWN0b3IgKyBcIiAuZm9ybSBmb3JtXCIpKTsgfSwgMTAwMCk7XG4gIH1cblxuICBzdG9wKCk6IHZvaWQge1xuICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICB9XG5cbiAgLy8gaGVscGVyIG1ldGhvZHNcbiAgZ2V0T2JqZWN0Rm9ybShzZWxlY3Rvcjogc3RyaW5nKTogYW55IHtcbiAgICB2YXIgaW5wdXQsIG5hbWUsIHR5cGU7XG4gICAgdmFyIHRyZWU7XG4gICAgdmFyIGZvcm1PYmplY3Q6IGFueSA9IHt9O1xuICAgIHZhciBpbnB1dHMgPSAkKHNlbGVjdG9yKS5maW5kKFwiaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1jaGVja2JveF0sIGlucHV0W3R5cGU9bnVtYmVyXVwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaW5wdXQgPSBpbnB1dHNbaV07XG4gICAgICBuYW1lID0gJChpbnB1dCkuYXR0cihcIm5hbWVcIik7XG4gICAgICB0eXBlID0gJChpbnB1dCkuYXR0cihcInR5cGVcIik7XG4gICAgICB2YXIgbmFtZVNwbGl0ID0gbmFtZS5zcGxpdCgnLicpO1xuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IG5hbWVTcGxpdC5sZW5ndGg7IGorKykge1xuICAgICAgICBsZXQgc2xpY2UgPSBuYW1lU3BsaXQuc2xpY2UoMCwgKGogKyAxKSk7XG4gICAgICAgIGxldCBwcm9wOiBzdHJpbmcgPSBzbGljZS5qb2luKFwiLlwiKTtcbiAgICAgICAgZXZhbChcImlmKFwiICsgcHJvcCArIFwiID09IHVuZGVmaW5lZCkgXCIgKyBwcm9wICsgXCIgPSB7fVwiKTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICBldmFsKG5hbWUgKyBcIiA9ICdcIiArICQoaW5wdXQpLnZhbCgpICsgXCInXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgIGV2YWwobmFtZSArIFwiID0gXCIgKyBwYXJzZUZsb2F0KCQoaW5wdXQpLnZhbCgpKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICBldmFsKG5hbWUgKyBcIiA9IFwiICsgJChpbnB1dCkuaXMoXCI6Y2hlY2tlZFwiKSkgPyAxIDogMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZvcm1PYmplY3Q7XG4gIH07XG5cbiAgLy8gPT09PT0gd2lkZ2V0IHBhcmFtcyA9PT09PVxuICBwdWJsaWMgdG9waWNOYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyB0b3BpY1R5cGU6IHN0cmluZztcbiAgcHVibGljIHRvcGljOiBST1NMSUIuVG9waWM7XG59XG5cbndpbmRvd1tcIldpZGdldFRvcGljUHVibGlzaGVyXCJdID0gV2lkZ2V0VG9waWNQdWJsaXNoZXI7XG4iXX0="}